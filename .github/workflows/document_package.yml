name: Document package 
on:
    push:
        branches: [feature/sync_docs]
jobs:
    update_cli_doc:
        # The type of runner that the job will run on
        runs-on: ubuntu-latest
        strategy:
            matrix:
                python-version: ["3.9"]
        steps:
            - name: Checkout
              uses: actions/checkout@v4
            # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
            - name: setup python
              uses: actions/setup-python@v4
              with:
                python-version: "3.10" # install the python version needed
            - name: Document CLI and write to folder
              run: |
                    make deps-install
                    poetry run typer postprocessing_variant_calls.main utils docs > docs/cli.md
            - uses: EndBug/add-and-commit@v9
              with:
                default_author: github_actions
                message: "add doc for cli"
                add: '["docs/cli.md --force"]'
            - uses: actions/checkout@v4
              with:
                ref: docs
            - uses: jaywcjlove/github-action-read-file@main
              id: cat_file_module
              with:
                branch: ${{ github.ref }}
                path: docs/cli.md
            - name: Write Module yaml to temp
              if: ${{ steps.cat_file_module.outputs.size }}
              id: write_yml_module
              run: |
                  echo '${{ steps.cat_file_module.outputs.content }}' > ${{ github.workspace }}/CLI.md
            - uses: EndBug/add-and-commit@v9
              with:
                default_author: github_actions
                message: "add doc for cli"
                add: '["cli.md --force"]'
                push: 'origin docs --set-upstream --force'
